<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transact - Invitation</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link rel="stylesheet" href="css/invitation.css" />
    <link rel="stylesheet" href="css/accessibility-fixes.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg mb-4">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="/">
          <img src="/images/favicon.ico" alt="Transact" class="logo" />
          Transact
        </a>
        <div class="d-flex align-items-center">
          <div class="theme-switch" role="button" tabindex="0">
            <i class="bi bi-moon-fill"></i>
            <i class="bi bi-sun-fill"></i>
          </div>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="row justify-content-center mt-5">
        <div class="col-md-6">
          <div class="card shadow animate__animated animate__fadeIn">
            <div class="card-body">
              <div class="text-center mb-4">
                <img
                  src="/images/favicon.ico"
                  alt="Transact"
                  class="logo mb-3"
                />
                <h2>Transact</h2>
              </div>

              <div
                id="invitation-code-section"
                class="animate__animated animate__fadeIn"
              >
                <h4 class="text-center mb-4">Enter Invitation Code</h4>
                <form id="invitation-form">
                  <div class="mb-4">
                    <input
                      type="text"
                      class="form-control form-control-lg"
                      id="invitation-code"
                      placeholder="Enter your invitation code"
                      required
                    />
                  </div>
                  <div class="d-grid">
                    <button
                      type="submit"
                      class="btn btn-primary btn-lg"
                      id="verify-code-btn"
                    >
                      <span
                        class="spinner-border spinner-border-sm me-2 d-none"
                        id="verify-spinner"
                        role="status"
                        aria-hidden="true"
                      ></span>
                      <span id="verify-text">Submit</span>
                    </button>
                  </div>
                </form>

                <div class="text-center mt-4">
                  <p class="text-secondary mb-0">
                    Don't have an invitation code?
                  </p>
                  <button id="request-invitation-btn" class="btn btn-link">
                    Request an Invitation Code
                  </button>
                </div>
              </div>

              <div
                id="request-form-section"
                style="display: none"
                class="animate__animated animate__fadeIn"
              >
                <h4 class="text-center mb-4">Request an Invitation Code</h4>
                <form id="request-form">
                  <div class="form-section">
                    <div class="form-section-title">Contact Information</div>
                    <div class="form-group">
                      <label for="email" class="form-label required-field"
                        >Email Address</label
                      >
                      <input
                        type="email"
                        class="form-control"
                        id="email"
                        required
                      />
                      <small class="form-text"
                        >We'll use this to contact you about your request</small
                      >
                    </div>
                    <div class="form-group">
                      <label for="telegram" class="form-label"
                        >Telegram Handle</label
                      >
                      <div class="input-group">
                        <span class="input-group-text">@</span>
                        <input
                          type="text"
                          class="form-control"
                          id="telegram"
                          pattern="[a-zA-Z0-9_]{5,32}"
                          title="Telegram usernames can only contain letters, numbers and underscores. Must be 5-32 characters long."
                        />
                      </div>
                      <small class="form-text"
                        >For quick communication and updates (optional)</small
                      >
                    </div>
                    <div class="form-group">
                      <label for="whatsapp" class="form-label"
                        >WhatsApp Number</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="whatsapp"
                        pattern="[+0-9]+"
                        title="Please enter a valid WhatsApp number with country code (e.g., +1234567890)"
                      />
                      <small class="form-text"
                        >Alternative contact method (optional)</small
                      >
                    </div>
                    <div class="form-group">
                      <label for="name" class="form-label">Full Name</label>
                      <input
                        type="text"
                        class="form-control"
                        id="name"
                        maxlength="50"
                      />
                    </div>
                  </div>

                  <div class="form-section">
                    <div class="form-section-title">Merchant Information</div>
                    <div class="form-group">
                      <label for="country" class="form-label">
                        Region of Operation
                      </label>
                      <select class="form-select" id="country">
                        <option value="" selected>Select a region</option>
                        <optgroup label="Continents">
                          <option value="Europe">Europe</option>
                          <option value="North America">North America</option>
                          <option value="South America">South America</option>
                          <option value="Asia">Asia</option>
                          <option value="Africa">Africa</option>
                          <option value="Oceania">Oceania</option>
                        </optgroup>
                        <optgroup label="Countries">
                          <!-- Countries will be populated via JavaScript -->
                        </optgroup>
                      </select>
                      <small class="form-text"
                        >Select a continent or specific country</small
                      >
                    </div>
                    <div class="form-group">
                      <label for="daily-volume" class="form-label">
                        Expected Daily Transaction Volume
                      </label>
                      <select class="form-select" id="daily-volume">
                        <option value="" selected>Select a range</option>
                        <option value="0-10">0 - 10 transactions</option>
                        <option value="11-50">11 - 50 transactions</option>
                        <option value="51-100">51 - 100 transactions</option>
                        <option value="101-500">101 - 500 transactions</option>
                        <option value="501+">501+ transactions</option>
                      </select>
                      <small class="form-text">
                        Approximate number of transactions you expect to process
                        daily
                      </small>
                    </div>
                    <div class="form-group">
                      <label for="referral-source" class="form-label">
                        How did you hear about Transact?
                      </label>
                      <select class="form-select" id="referral-source">
                        <option value="" selected>Select an option</option>
                        <option value="Search Engine">Search Engine</option>
                        <option value="Social Media">Social Media</option>
                        <option value="Word of Mouth">Word of Mouth</option>
                        <option value="Friend Suggestion">
                          Friend Suggestion
                        </option>
                        <option value="Reddit">Reddit</option>
                        <option value="Other">Other</option>
                      </select>
                    </div>
                    <div
                      class="form-group"
                      id="other-referral-container"
                      style="display: none"
                    >
                      <label for="other-referral" class="form-label"
                        >Please specify:</label
                      >
                      <textarea
                        class="form-control"
                        id="other-referral"
                        rows="2"
                        maxlength="500"
                      ></textarea>
                      <small class="form-text">
                        <span id="other-referral-char-count">0</span>/500
                        characters
                      </small>
                    </div>
                  </div>

                  <div class="alert alert-info">
                    <i class="bi bi-info-circle me-2"></i>
                    While Transact doesn't require KYC or KYB from our
                    merchants, your customers might need to complete KYC
                    procedures.
                  </div>

                  <div class="d-grid gap-2">
                    <button
                      type="submit"
                      class="btn btn-primary btn-lg"
                      id="submit-request-btn"
                    >
                      <span
                        class="spinner-border spinner-border-sm me-2 d-none"
                        id="submit-spinner"
                        role="status"
                        aria-hidden="true"
                      ></span>
                      <span id="submit-text">Submit Request</span>
                    </button>
                    <button
                      type="button"
                      id="back-to-invitation"
                      class="btn btn-outline-secondary"
                    >
                      Back to Invitation
                    </button>
                  </div>
                </form>
              </div>

              <div
                id="success-message"
                class="alert alert-success mt-3 animate__animated animate__fadeIn"
                style="display: none"
              ></div>
              <div
                id="error-message"
                class="alert alert-danger mt-3 animate__animated animate__fadeIn"
                style="display: none"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Add CSRF protection script before other scripts -->
    <script src="/js/csrf.js"></script>
    <script src="/js/invitation.js"></script>
  </body>
</html>
